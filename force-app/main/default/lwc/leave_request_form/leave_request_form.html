<template>
    <lightning-card title={formTitle}>
        <div class="slds-m-around_medium">
            <label>Start Date</label>
            <div class="date-input" data-id="startDate" lwc:dom="manual"></div>

            <label>End Date</label>
            <div class="date-input" data-id="endDate" lwc:dom="manual"></div>

            <lightning-input type="text" label="Reason" value={reason} onchange={handleReasonChange}></lightning-input>

            <lightning-combobox label="Leave Type" value={type} options={typeOptions} onchange={handleTypeChange}></lightning-combobox>

            <div class="slds-m-top_medium">
                <lightning-button label={submitButtonLabel} onclick={handleSubmit} variant="brand" disabled={isLoading}></lightning-button>
                <lightning-button if:true={isEditMode} label="Cancel" onclick={handleCancelEdit} variant="neutral" class="slds-m-left_small"></lightning-button>
            </div>
        </div>
    </lightning-card>

    <!-- Requests List -->
    <lightning-card if:true={requests.length} title="Leave Requests" class="slds-m-top_medium">
        <div class="slds-m-around_medium">
            <template for:each={requests} for:item="request">
                <div key={request.Id} class="slds-box slds-m-bottom_small slds-grid slds-grid_align-spread">
                    <div class="slds-col">
                        <strong>{request.Start_Date__c} - {request.End_Date__c}</strong><br/>
                        Status: {request.Status__c}<br/>
                        <span if:true={request.Reason__c}>Reason: {request.Reason__c}<br/></span>
                        <span if:true={request.Type__c}>Type: {request.Type__c}</span>
                    </div>
                    <div class="slds-col slds-no-flex" if:true={request.isPending}>
                        <lightning-button label="Edit" data-id={request.Id} onclick={handleEdit} variant="neutral" size="small" class="slds-m-right_x-small"></lightning-button>
                        <lightning-button label="Cancel" data-id={request.Id} onclick={handleCancel} variant="destructive" size="small"></lightning-button>
                    </div>
                </div>
            </template>
        </div>
    </lightning-card>
    

</template>